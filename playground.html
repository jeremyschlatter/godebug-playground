<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <link href="/css/style.css" rel="stylesheet">
</head>
<body>
    <button id="run">Run</button>
    <button id="debug">Debug</button>
    <div id="editor">package main

import (
    "fmt"

    "github.com/mailgun/godebug/lib"
)

func main() {
    godebug.SetTrace()
    fmt.Println("Hello, debugger!")
}</div>
    <div id="console"></div>
    <script src="https://cdn.jsdelivr.net/ace/1.1.9/min/ace.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
    <script src="/js/jqconsole.js" type="text/javascript" charset="utf-8"></script>
    <script>
        var godebugConsole;
        $(function() {
            // Set up editor.
            var editor = ace.edit("editor");
            editor.setTheme("ace/theme/monokai");
            editor.getSession().setMode("ace/mode/golang");
            $( "#editor" ).css("visibility", "visible");

            // Set up console and add hook for generated code.
            godebugConsole = $( "#console" ).jqconsole('', '>>> ');

            // Set up debug button.
            $( "#debug" ).click(function() {
                $.ajax("/compile", {
                    type: "POST",
                    data: editor.getValue(),
                    processData: false,
                    success: $.globalEval
                });
            });

            // Set up run button.
            $( "#run" ).click(function() {
                $.ajax("/compile-normal", {
                    type: "POST",
                    data: editor.getValue(),
                    processData: false,
                    success: $.globalEval
                });
            });
        });
    </script>
</body>
</html>
